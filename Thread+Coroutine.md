# Notes
- 多线程+协程相关随笔，学习记录
-------------
目录
-------------
* c++线程中的几种锁
  - 线程之间的锁有：互斥锁、条件锁、自旋锁、读写锁、递归锁，一般而言，锁的功能越强大，性能就越低
  - 互斥锁：
      - 互斥锁用于控制多个线程对他们之间共享资源互斥访问的一个信号量。也就是说为了避免多个线程在某一时刻同时操作一个共享资源。例如线程池中有多个空闲线程和一个任务队列。任何一个线程都要使用互斥锁访问任务队列，以避免多个线程同时访问任务队列以发生错乱。
      - 在某一时刻，只有一个线程可以获取互斥锁，在释放互斥锁之前其他线程不能够获取该互斥锁。如果其他线程想要获取这个互斥锁，只能以阻塞的方式进行等待。
      - 其中lock()表示以阻塞方式进行加锁，如果之前mutex被加锁了，那么程序会阻塞在这里
      - trylock()表示以非阻塞方式进行加锁，不会等待而是马上返回，失败返回0
  - 条件锁：
      - 条件锁就是需要一个条件才能唤醒线程，比如多个线程共用一个变量，一个线程在对变量修改时达到另一个已经挂起的线程的条件，当前线程就会把另一个线程唤醒。
  - 读写锁：
      - 读写锁就是把读锁和写锁分离，多个线程可以同时获得读锁，但是读锁被获取时不能有线程获取到写锁。而有写锁被获取时，读锁和写锁都不能再被获取。目的是让多个线程可以同时读取某个共用数据，而当有线程写入共用数据时保证该线程是独占这块数据的。      
  - 自旋锁：
      - 通过死循环不断检测是否达到释放锁的条件，如果达到就释放锁，否则就继续循环。
* pthread
  - 互斥锁的创建：
      - 静态创建：pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
      - 动态创建：int pthread_mutex_init(pthread_mutex_t *mutex,const pthread_mutexattr_t *attr);
      - 参数attr指定了新建互斥锁的属性，如果该参数为空，则使用默认的互斥锁属性，默认属性为快速互斥锁。
      - 成功返回 0。
      
所需物品              |用途         |备注         |
---------------------|-------------|------------|
电化学沉积反应池       | --          |三电极，通气 |       
K(SbO)C4H4O6·0.5H2O(半水合酒石酸氧锑钾)  | 前驱物   |浓度约在2~6mmol/L      |
H2SeO3(亚硒酸)       | 前驱物  |浓度约5mmol/L      |
C6H9O6Sb(醋酸锑)     | 前驱物  |浓度约2.5mmol/L，99.9%微量金属元素    |
Na2SeSO3(硒硫酸钠)    |前驱物  |--|
SeO2                 |前驱物   |浓度约6mmol/L   |
NH4Cl               | 铵缓冲液 |浓度约100mmol/L      |
浓盐酸              | 调节溶液pH值   |--      |
Bi(NO3)3·5H2O(五水合硝酸铋) | 掺杂铋 |浓度约0.5-1.5mmol/L     |
SnO2涂层玻璃基板          | 工作电极 |若干     |
纯石墨板                  | 对电极|--  |
饱和甘汞电极(SCE)         |参考电极| -- |
Pt spiral wire  |对电极|  --|
丙酮，氨，酒精，去离子水|清洗基片| --|
pH计       |测量溶液pH| --|
